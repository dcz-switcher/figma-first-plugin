<style>
  *{
    margin: 0;
    padding: 0;
    font-family: 'Inter', 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
  }

  .skin-color1{ background-color: #5396FA; }
  .skin-color2{ background-color: #FFCF37; }
  .skin-color3{ background-color: #F6D3B5; }
  .skin-color4{ background-color: #EDB893; }
  .skin-color5{ background-color: #916441; }
  .skin-color6{ background-color: #402E23; }

  #container{
    background-color: #fff;
    color: white;
  }

  #preview{
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 16px;
    height: 150px;
  }

  #properties{
    text-align: center;
    color: #5396FA;
    font-weight: bold;
    font-size: 16px;
    padding: 16px 0;
    border-bottom: 1px solid #E5E5E5;
    margin-bottom: 16px;
  }

  #colors{
    padding: 0 16px;
    display: flex;
    justify-content: space-between;
  }

  .color-circle{
    width: 36px;
    height: 36px;
    border-radius: 100%;
    cursor: pointer;    
  }


  .radio-wrap{
    position: relative;
  }

  #colors input[type=radio]{
    display: none;
  }

  #colors label{
    width: 36px;
    height: 36px;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 10;
    cursor: pointer;
  }

  .radio-skin{
    display: block;
    position: relative;
    width: 36px;
    height: 36px;
    border-radius: 100%;
  }

  .radio-skin::after{
    display: block;
    position: relative;
    content: '';
    width: 46px;
    height: 46px;
    top: -9px;
    left: -9px;
    border-radius: 100%;
  }

  #colors input[type=radio]:checked ~ .radio-skin::after{
    border: 4px solid #5A5A5F;
  }




  #actions{
    padding: 16px;
    text-align: right;
  }

  button {
    height: 30px;
    width: 64px;
    box-sizing: border-box;
    border-radius: 6px;
    font-style: normal;
    font-size: 13px;
    text-align: center;
    border: none;
  }
  #cancel{
    border: 1px solid rgba(255, 255, 255, 0.8);
    color: white;
    background: none;
  }

  #create{
    background: #18A0FB;
    color: white;
  }
 
</style>

<div id="container">
  <!-- 
    <p>Count: <input id="count" value="5"></p>
  -->
  <section id="preview">
    <!--
      <svg width="97" height="110" viewBox="0 0 97 110" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path id="preview-head" fill-rule="evenodd" clip-rule="evenodd" d="M8.19697 36.0053C10.2014 15.7895 27.2568 0 48 0C68.751 0 85.8113 15.8013 87.8053 36.028C88.0344 36.0094 88.2661 36 88.5 36C93.1944 36 97 39.8056 97 44.5V51.5C97 56.1944 93.1944 60 88.5 60C88.3322 60 88.1654 59.9951 88 59.9855V70C88 92.0914 70.0914 110 48 110C25.9086 110 8 92.0914 8 70V59.9855C3.53831 59.7267 0 56.0266 0 51.5V44.5C0 39.907 3.6429 36.1649 8.19697 36.0053Z" fill="#FFCF37"/>
      </svg>
    -->
  </section>
  
  <section id="properties">
    <div>Peau</div>
  </section>

  <section id="colors">
    <div class="radio-wrap">
      <input type="radio" id="color-1" name="skin-color" value="#5396FA">
      <label for="color-1"></label>
      <div class="radio-skin skin-color1"></div>
    </div>
    <div class="radio-wrap">
      <input type="radio" id="color-2" name="skin-color" checked="checked" value="#FFCF37">
      <label for="color-2"></label>
      <div class="radio-skin skin-color2"></div>
    </div>
    <div class="radio-wrap">
      <input type="radio" id="color-3" name="skin-color" value=" #F6D3B5">
      <label for="color-3"></label>
      <div class="radio-skin skin-color3"></div>
    </div>
    <div class="radio-wrap">
      <input type="radio" id="color-4" name="skin-color" value="#EDB893">
      <label for="color-4"></label>
      <div class="radio-skin skin-color4"></div>
    </div>
    <div class="radio-wrap">
      <input type="radio" id="color-5" name="skin-color" value="#916441">
      <label for="color-5"></label>
      <div class="radio-skin skin-color5"></div>
    </div>
    <div class="radio-wrap">
      <input type="radio" id="color-6" name="skin-color" value=" #402E23">
      <label for="color-6"></label>
      <div class="radio-skin skin-color6"></div>
    </div>
  </section>
  
  <section id="actions">
    <button id="cancel">Cancel</button>
    <button id="create">Create</button>
  </section>


</div>



<script>

const AVATAR = '<svg width="97" height="110" viewBox="0 0 97 110" fill="none" xmlns="http://www.w3.org/2000/svg"><path id="head" fill-rule="evenodd" clip-rule="evenodd" d="M8.19697 36.0053C10.2014 15.7895 27.2568 0 48 0C68.751 0 85.8113 15.8013 87.8053 36.028C88.0344 36.0094 88.2661 36 88.5 36C93.1944 36 97 39.8056 97 44.5V51.5C97 56.1944 93.1944 60 88.5 60C88.3322 60 88.1654 59.9951 88 59.9855V70C88 92.0914 70.0914 110 48 110C25.9086 110 8 92.0914 8 70V59.9855C3.53831 59.7267 0 56.0266 0 51.5V44.5C0 39.907 3.6429 36.1649 8.19697 36.0053Z" fill="#FFCF37"/></svg>';



let $preview = document.querySelector('#preview');


document.addEventListener('DOMContentLoaded', () => {
  $preview.innerHTML = AVATAR;
});


document.querySelectorAll("input[name='skin-color']").forEach((el) => {
  el.addEventListener('change', function() {
    //alert(document.querySelector("input[name='skin-color']:checked").value);
    document.querySelector('#head').setAttribute('fill', document.querySelector("input[name='skin-color']:checked").value);
  })
});


document.getElementById('create').onclick = () => {
  /*
  const textbox = document.getElementById('count');
  const count = parseInt(textbox.value, 10);
  parent.postMessage({ pluginMessage: { type: 'create-rectangles', count } }, '*')
  */
 const skinColor = document.querySelector("input[name='skin-color']:checked").value;
  parent.postMessage({ pluginMessage: { type: 'create-avatar', skinColor } }, '*');
}

document.getElementById('cancel').onclick = () => {
  parent.postMessage({ pluginMessage: { type: 'cancel' } }, '*')
}

</script>
